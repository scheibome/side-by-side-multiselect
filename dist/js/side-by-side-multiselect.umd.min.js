!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SideBySideMultiselect=t()}(this,(function(){"use strict";return function(e){void 0===e&&(e="");var t=e.selector?document.querySelectorAll(e.selector):document.querySelectorAll(".js-sidebysidemultiselect"),n=e.classSettings,i=n&&n.wrapperclass?n.wrapperclass:"side-by-side-multiselect",r=n&&n.optionclass?n.optionclass:"side-by-side-multiselect__option",l=n&&n.optionclass?n.optionclass:"side-by-side-multiselect__option--selected",a=n&&n.boxesclass?n.boxesclass:"side-by-side-multiselect__inner",o=n&&n.filterwrapperclass?n.filterwrapperclass:"side-by-side-multiselectfilter",d=n&&n.filterclass?n.filterclass:"side-by-side-multiselectfilter__input",s=n&&n.filterlabelclass?n.filterlabelclass:"side-by-side-multiselectfilter__label",c=n&&n.counterclass?n.counterclass:"side-by-side-multiselect__counter",u=n&&n.labelclass?n.labelclass:"side-by-side-multiselectlabel",f="Error, the select must been a multible select",p="-move",v=e.labels,y=v&&v.filter?v.filter:"Filter",m=v&&v.selected?v.selected:"Selected: ",b=function(e,t,n){for(;t<0;)t+=e.length;for(;n<0;)n+=e.length;if(n>=e.length)for(var i=n-e.length+1;i--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),console.log(1627215883895,e),e},h=function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}},x=function(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}},S=function(e){return e.querySelector('[data-boxdirection="add"]')},E=function(e){return document.getElementById(e.id+p)},A=function(e){var t=e.value.trim().split(";");return(t=t.filter((function(e){return 0!==Object.keys(e).length}))).map((function(e){return e.trim()}))},g=function(t,n){var i;if(e.moveOption){var r=E(t);i=A(r)}else i=t.querySelectorAll("option:checked");n.querySelector("."+c).innerText=m+i.length},k=function(e,t,n){A(n).forEach((function(n){if(n){var i=e.querySelector("option[value="+n+"]").index,r=t.querySelector('[data-direction="add"][data-index="'+i+'"]');S(t).appendChild(r)}}))},q=function(t,n,i,a){var o=t.dataset;if(t.className===r&&o.direction&&o.index){var d,s,c=o.index,u=o.value,f=n.querySelectorAll("option");a&&(d=(s=E(n)).value.trim()),"add"===o.direction?a?(!function(e){var t=S(e).querySelector("."+l);t&&t.classList.remove(l)}(i),t.classList.add(l),s.setAttribute("data-selected",u)):(i.querySelector('[data-direction="remove"][data-index="'+c+'"]').style.display="block",f[c].selected=!1,t.style.display="none"):(i.querySelector('[data-direction="add"][data-index="'+c+'"]').style.display="block",f[c].selected=!0,t.style.display="none",a&&(s.value=d+" "+u+";",k(n,i,s))),e.hideCounter||g(n,i)}},C=function(e,t,n){var i=document.createElement("div");return i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("tabindex","0"),i.classList.add(a),i.addEventListener("keydown",(function(l){"ArrowDown"===l.key||"ArrowUp"===l.key?function(e,t){e.preventDefault();var n=document.activeElement,i=h(n,':not([style="display: none;"]'),l=x(n,':not([style="display: none;"]');if(n.classList.contains(a)){var o=t.querySelector("."+r+':not([style="display: none;"])');o&&o.focus()}else"ArrowUp"===e.key?void 0!==l&&l.focus():"ArrowDown"===e.key&&void 0!==i&&i.focus()}(l,i):" "!==l.key&&"Enter"!==l.key||function(e,t,n,i){e.preventDefault();var r=document.activeElement,l=h(r,':not([style="display: none;"]'),a=x(r,':not([style="display: none;"]');void 0!==l?l.focus():void 0!==a?a.focus():r.parentNode.focus(),void 0!==a&&a.focus(),q(r,t,n,i)}(l,t,e,n)})),i},L=function(e,t){var n=document.createElement("div");return n.innerHTML=e.text,n.setAttribute("role","option"),n.setAttribute("tabindex","-1"),n.classList.add(r),n.setAttribute("data-value",e.value),n.setAttribute("data-index",e.index),1===t?n.setAttribute("data-direction","add"):n.setAttribute("data-direction","remove"),n},w=function(e,t){e.querySelectorAll("option").forEach((function(e){!function(e,t){var n=t.querySelectorAll("."+a);if(2===n.length){var i=L(e,0),r=L(e,1);n[0].appendChild(i),n[1].appendChild(r)}}(e,t)}))},_=function(t,n,i,r){t.addEventListener("click",(function(t){t.preventDefault();var l=E(n),a=l.dataset.selected,o=A(l),d=o.findIndex((function(e){return e===a})),s=o.length-1,c="";switch(r){case 0:d>0&&(o=b(o,d,0));break;case-1:d>0&&(o=b(o,d,d+r));break;case 1:d<s&&(o=b(o,d,d+r));break;case"last":d<s&&(o=b(o,d,s));break;case"remove":o=o.filter((function(e){return e!==a})),i.querySelector('[data-direction="add"][data-value="'+a+'"]').style.display="none",i.querySelector('[data-direction="remove"][data-value="'+a+'"]').style.display="block"}o.forEach((function(e){c=c+e+";"})),l.value=c,k(n,i,l),e.hideCounter||g(n,i)}))},T=function(e){var t=document.createElement("button");return t.innerText=e,t},B=function(e,t){e.querySelectorAll("option").forEach((function(e){var n=t.querySelector('[data-direction="add"][data-index="'+e.index+'"]'),i=t.querySelector('[data-direction="remove"][data-index="'+e.index+'"]');e.selected?(n.style.display="block",i.style.display="none"):(n.style.display="none",i.style.display="block")}))},D=function(t,n){var i=function(t,n){var i=document.createElement("div");i.classList.add(o);var r=document.createElement("label");r.innerText=y,r.classList.add(s),r.setAttribute("for",t.id+"-filter");var l=document.createElement("input");return l.id=t.id+"-filter",l.setAttribute("type","text"),e.showfilterplaceholder&&l.setAttribute("placeholder",y),l.classList.add(d),l.addEventListener("keyup",(function(){!function(e,t){var n=t.querySelectorAll('[data-direction="remove"]'),i=e.value.toUpperCase();n.forEach((function(e){(e.textContent||e.innerText).toUpperCase().indexOf(i)>-1?e.style.display="block":e.style.display="none"}))}(this,n),""===this.value?(B(t,n),l.classList.remove("isfilled")):l.classList.add("isfilled")})),i.appendChild(l),e.hidefilterlabel||i.appendChild(r),i}(t,n);return n.parentNode.insertBefore(i,n),n};t.forEach((function(t){if(function(e){if("select-multiple"!==e.type){var t=document.createElement("p");return t.innerText=f,t.style.backgroundColor="red",t.style.padding="1rem",t.style.color="white",e.parentNode.insertBefore(t,e),console.log(f,":",e),!1}return!0}(t)){var n=e.moveOption;t.style.display="none",function(e){var t=document.querySelector('label[for="'+e.id+'"]');t&&t.classList.add(u)}(t);var r=function(e,t){var n=document.createElement("div");n.classList.add(i);var r=C(n,e,t);r.setAttribute("data-boxdirection","remove"),n.appendChild(r);var l=C(n,e,t);return l.setAttribute("data-boxdirection","add"),n.appendChild(l),e.parentNode.insertBefore(n,e.nextSibling),n}(t,n);if(w(t,r),B(t,r),e.hidefilter||(r=D(t,r)),n){var l=function(e,t){var n=document.createElement("input");return n.id=e.id+p,n.name=e.name.replace("[]","")+p,n.value=e.dataset.selecteditems,t.appendChild(n),console.log(1627218185086,t),n}(t,r);k(t,r,l),B(t,r),function(e,t){var n=T("to top");_(n,e,t,0),t.appendChild(n);var i=T("up");_(i,e,t,-1),t.appendChild(i);var r=T("down");_(r,e,t,1),t.appendChild(r);var l=T("to the bottom");_(l,e,t,"last"),t.appendChild(l);var a=T("remove");_(a,e,t,"remove"),t.appendChild(a)}(t,r)}if(!e.hideCounter){var a=function(){var e=document.createElement("div");return e.innerText=m,e.classList.add(c),e}();r.appendChild(a),g(t,r)}r.addEventListener("click",(function(e){q(e.target,t,r,n)}))}}))}}));
