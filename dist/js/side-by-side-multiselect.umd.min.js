!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SideBySideMultiselect=t()}(this,(function(){"use strict";return function(e){void 0===e&&(e="");var t=e.selector?document.querySelectorAll(e.selector):document.querySelectorAll(".js-sidebysidemultiselect"),i=e.classSettings,n=i&&i.wrapperclass?i.wrapperclass:"side-by-side-multiselect",l=i&&i.optionclass?i.optionclass:"side-by-side-multiselect__option",r=i&&i.boxesclass?i.boxesclass:"side-by-side-multiselect__inner",a=i&&i.filterwrapperclass?i.filterwrapperclass:"side-by-side-multiselectfilter",d=i&&i.filterclass?i.filterclass:"side-by-side-multiselectfilter__input",o=i&&i.filterlabelclass?i.filterlabelclass:"side-by-side-multiselectfilter__label",s=i&&i.counterclass?i.counterclass:"side-by-side-multiselect__counter",c=i&&i.labelclass?i.labelclass:"side-by-side-multiselectlabel",u="Error, the select must been a multible select",f="-move",p=e.labels,y=p&&p.filter?p.filter:"Filter",v=p&&p.selected?p.selected:"Selected: ",m=function(e,t){var i=e.nextElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.nextElementSibling}},b=function(e,t){var i=e.previousElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling}},x=function(e,t){var i=e.querySelectorAll("option:checked");t.querySelector("."+s).innerText=v+i.length},h=function(t,i,n,r){var a=t.dataset;if(t.className===l&&a.direction&&a.index){var d,o,s=a.index,c=a.value,u=i.querySelectorAll("option");r&&(d=(o=document.getElementById(i.id+f)).value.trim()),"add"===a.direction?r||(n.querySelector('[data-direction="remove"][data-index="'+s+'"]').style.display="block",u[s].selected=!1,t.style.display="none"):(n.querySelector('[data-direction="add"][data-index="'+s+'"]').style.display="block",u[s].selected=!0,t.style.display="none",r&&(o.value=d+" "+c+";",C(i,n,o))),e.hideCounter||x(i,n)}},E=function(e,t,i){var n=document.createElement("div");return n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("tabindex","0"),n.classList.add(r),n.addEventListener("keydown",(function(a){"ArrowDown"===a.key||"ArrowUp"===a.key?function(e,t){e.preventDefault();var i=document.activeElement,n=m(i,':not([style="display: none;"]'),a=b(i,':not([style="display: none;"]');if(i.classList.contains(r)){var d=t.querySelector("."+l+':not([style="display: none;"])');d&&d.focus()}else"ArrowUp"===e.key?void 0!==a&&a.focus():"ArrowDown"===e.key&&void 0!==n&&n.focus()}(a,n):" "!==a.key&&"Enter"!==a.key||function(e,t,i,n){e.preventDefault();var l=document.activeElement,r=m(l,':not([style="display: none;"]'),a=b(l,':not([style="display: none;"]');void 0!==r?r.focus():void 0!==a?a.focus():l.parentNode.focus(),void 0!==a&&a.focus(),h(l,t,i,n)}(a,t,e,i)})),n},S=function(e,t){var i=document.createElement("div");return i.innerHTML=e.text,i.setAttribute("role","option"),i.setAttribute("tabindex","-1"),i.classList.add(l),i.setAttribute("data-value",e.value),i.setAttribute("data-index",e.index),1===t?(i.setAttribute("data-direction","add"),e.selected?i.style.display="block":i.style.display="none"):(i.setAttribute("data-direction","remove"),e.selected?i.style.display="none":i.style.display="block"),i},A=function(e,t){e.querySelectorAll("option").forEach((function(e){!function(e,t){var i=t.querySelectorAll("."+r);if(2===i.length){var n=S(e,0,i[0]),l=S(e,1,i[1]);i[0].appendChild(n),i[1].appendChild(l)}}(e,t)}))},k=function(e){var t,i=((t=document.createElement("button")).innerText="up",t);e.appendChild(i)},q=function(t,i){var n=function(t,i){var n=document.createElement("div");n.classList.add(a);var l=document.createElement("label");l.innerText=y,l.classList.add(o),l.setAttribute("for",t.id+"-filter");var r=document.createElement("input");return r.id=t.id+"-filter",r.setAttribute("type","text"),e.showfilterplaceholder&&r.setAttribute("placeholder",y),r.classList.add(d),r.addEventListener("keyup",(function(){!function(e,t){var i=t.querySelectorAll('[data-direction="remove"]'),n=e.value.toUpperCase();i.forEach((function(e){(e.textContent||e.innerText).toUpperCase().indexOf(n)>-1?e.style.display="block":e.style.display="none"}))}(this,i),""===this.value?(function(e,t){e.querySelectorAll("option").forEach((function(e){var i=t.querySelector('[data-direction="add"][data-index="'+e.index+'"]'),n=t.querySelector('[data-direction="remove"][data-index="'+e.index+'"]');e.selected?(i.style.display="block",n.style.display="none"):(i.style.display="none",n.style.display="block")}))}(t,i),r.classList.remove("isfilled")):r.classList.add("isfilled")})),n.appendChild(r),e.hidefilterlabel||n.appendChild(l),n}(t,i);return i.parentNode.insertBefore(n,i),i},C=function(e,t,i){var n=t.querySelector('[data-boxdirection="add"]');i.value.trim().split(";").forEach((function(i){if(i=i.trim()){var l=e.querySelector("option[value="+i+"]").index,r=t.querySelector('[data-direction="add"][data-index="'+l+'"]');n.appendChild(r)}}))};t.forEach((function(t){if(function(e){if("select-multiple"!==e.type){var t=document.createElement("p");return t.innerText=u,t.style.backgroundColor="red",t.style.padding="1rem",t.style.color="white",e.parentNode.insertBefore(t,e),console.log(u,":",e),!1}return!0}(t)){var i=e.moveOption;t.style.display="none",function(e){var t=document.querySelector('label[for="'+e.id+'"]');t&&t.classList.add(c)}(t);var l=function(e,t){var i=document.createElement("div");i.classList.add(n);var l=E(i,e,t);l.setAttribute("data-boxdirection","remove"),i.appendChild(l);var r=E(i,e,t);return r.setAttribute("data-boxdirection","add"),i.appendChild(r),e.parentNode.insertBefore(i,e.nextSibling),i}(t,i);if(A(t,l),e.hidefilter||(l=q(t,l)),!e.hideCounter){var r=function(){var e=document.createElement("div");return e.innerText=v,e.classList.add(s),e}();l.appendChild(r),x(t,l)}if(i){var a=function(e,t){var i=document.createElement("input");return i.id=e.id+f,i.name=e.name.replace("[]","")+f,i.value=e.dataset.selecteditems,t.appendChild(i),i}(t,l);C(t,l,a),k(l)}l.addEventListener("click",(function(e){h(e.target,t,l,i)}))}}))}}));
